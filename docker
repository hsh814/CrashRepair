#!/bin/bash
BASEDIR="$( cd -- "$(dirname "$0")" >/dev/null 2>&1 ; pwd -P )"
IMAGE_NAME="rshariffdeen/crepair"

if [[ "$(docker images -q $IMAGE_NAME 2> /dev/null)" == ""  ]]; then
  docker build -t $IMAGE_NAME .
fi


if [ ! "$(docker ps -q -f name=crepair)"  ]; then
    if [ ! "$(docker ps -aq -f status=exited -f name=crepair)"  ]; then
        docker rm crepair
    fi
    docker run -d -ti --name crepair -v $BASEDIR:/CrashRepair $IMAGE_NAME
fi

docker exec -it crepair bash
